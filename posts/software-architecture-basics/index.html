<!doctype html><html lang=pt dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>WIP - Arquitetura de Software Básica | Kaue Gatto</title><meta name=keywords content="ARCHTECTURE,OOP,Microservices,DDD"><meta name=description content="O básico que você como dev precisa conhecer de arquitetura de software! Maior e mais denso post, mas também o mais rico."><meta name=author content="Me"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kaue.cat/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://kaue.cat/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://kaue.cat/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://kaue.cat/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://kaue.cat/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=pt href=https://kaue.cat/posts/software-architecture-basics/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="WIP - Arquitetura de Software Básica"><meta property="og:description" content="O básico que você como dev precisa conhecer de arquitetura de software! Maior e mais denso post, mas também o mais rico."><meta property="og:type" content="article"><meta property="og:url" content="https://kaue.cat/posts/software-architecture-basics/"><meta property="og:image" content="https://kaue.cat/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-13T12:55:03+00:00"><meta property="article:modified_time" content="2023-11-13T12:55:03+00:00"><meta property="og:site_name" content="Kaue Gatto"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kaue.cat/%3Cimage%20path/url%3E"><meta name=twitter:title content="WIP - Arquitetura de Software Básica"><meta name=twitter:description content="O básico que você como dev precisa conhecer de arquitetura de software! Maior e mais denso post, mas também o mais rico."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kaue.cat/posts/"},{"@type":"ListItem","position":3,"name":"WIP - Arquitetura de Software Básica","item":"https://kaue.cat/posts/software-architecture-basics/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WIP - Arquitetura de Software Básica","name":"WIP - Arquitetura de Software Básica","description":"O básico que você como dev precisa conhecer de arquitetura de software! Maior e mais denso post, mas também o mais rico.","keywords":["ARCHTECTURE","OOP","Microservices","DDD"],"articleBody":"Arquitetura de Software - O básico Disclaimer: É impossível tratar bem todos os tipos de arquitetura e falar muito sobre arquitetura aqui, o foco desse “Caderno” pessoal não é esse, apesar disso, você provavelmente vai encontrar um bom conteúdo (ao menos introdutório) em partes do design de software e arquitetura que julgo importante.\nEsse capítulo é de longe o maior e com uma leitura mais densa, mas segundo a minha visão vale bastante a pena!!\nSe você quer mais aprofundamento em alguma arquitetura, ou até mesmo focar bastante nisso, olhe as referências. O blog do Herberto Graça é meu way-to-go. através da série “The software architecture chronicles”\nArquitetura à Nível de Solução Monolítos: Monolítos são basicamente um conjunto de soluções de software agrupadas, de maneiras a qual essas soluções estão acopladas por meio de coisas como a própria Linguagem de Programação ou no Deployment, se você, após uma alteração em um ponto específico de uma solução, precisa deployar outros módulos da sua aplicação, eles são monolítos, mesmo que sejam modularizados. Sistemas monolítos basicamente são um “tudo ou nada”, onde, se você necessitar subir o módulo de tickets, vai precisar subir o módulo de email também, pois eles estão acoplados.\n**With a monolithic application, if I want to try a new programming language, database, or framework, any change will impact a large amount of my system. With a system consisting of multiple services, I have multiple new places in which to try out a new piece of technology. I can pick a service that is perhaps lowest risk and use the technology there, knowing that I can limit any potential negative impact\nBuilding Microservices. Newman, Sam**\nService-Oriented Architecture Wip!\nMuch has been said about SOA, and there are a few different implementation patterns but, in essence, SOA focuses on only a few concepts and doesn’t give any prescription on how to implement them: Composability of user-facing applications, Reusable Business Services, Technology stack independent, Autonomy (independent evolution, scalability \u0026 deployability).\nService Oriented Architecture. Graça, Herberto\nMicroserviços **[Microservices are] Small autonomous services that work together, modelled around a business domain.\nPrinciples Of Microservices, Newman, Sam.**\nArquitetura à nível de Software Modelo Baseado em Camadas É bem comum dividirmos nosso software em camadas, é o que fazemos na maior parte das arquiteturas de software modernas, essa divisão tem como objetivo separar partes do código que não devem interagir muito entre si exceto por alguns pontos de contato (que podem ser outras camadas), e também garantir que exista um “meio de campo” entre certas camadas, ou seja, a interface não vai falar diretamente com o banco de dados, existe um caminho para isso.\nMVC O MVC (Model-View-Controller) é um pattern arquitetural usado como um molde pra distribuição de responsabilidades em trechos de código que tratam de interfaces com o usuário (UI). Há três responsabilidades pre-estabelecidas:\nView: contém a lógica que monta a UI (telas ou equivalente) e que trata a entrada de dados, recebendo eventos do usuário (clique, digitação etc.). As do usuário são repassadas para o Controller. A View pode buscar dados diretamente do Model para exibição na UL Controller. o “meio de campo”, recebe interações do usuário da View e colabora com o Model para enviar e obter dados, que são repassados para a View. Model: o resto do código, que não tem a ver com UI. Realiza cálculos, regras de negócio, persistência, integrações com outros sistemas etc. Há diversas variações como MVP, MVVM, entre outros. Outros exemplos → MVVM The main thrust of the Model/View/ViewModel architecture seems to be that on top of the data (”the Model”), there’s another layer of non-visual components (”the ViewModel”) that map the concepts of the data more closely to the concepts of the view of the data (”the View”). It’s the ViewModel that the View binds to, not the Model directly.\nArquitetura Hexagonal - Ports And Adapters A arquitetura hexagonal é uma proposta de arquitetura de software que segue lógicas de desenvolvimento de software que pensam em acoplamento e coesão, basicamente, módulos de alto nível (que possuem regras de negócio) não devem depender de implementações de módulos de baixo nível (frameworks, bibliotecas de terceiros, et cetera.). Tudo que acessa o coração / domínio / regra de negócio da sua aplicação deve passar por portas, que são basicamente interfaces que representam o que aquela biblioteca fará para você, chamamos a implementação dessas interfaces de adaptadores.\nOu seja, em um sistema de login, podemos disparar um evento em uma fila de mensagens RabbitMQ que será consumido por um outro serviço de notificação, pensando em um nível um pouco mais abstrato, esquecendo bibliotecas ou ferramentas, podemos criar uma interface de publicador de eventos e dizer que vamos usar ela, ou seja, nossa lógica de negócio precisa enviar uma notificação de cadastro e um payload, independente se rabbitMQ, kafka ou outra porta está sendo usada:\nprivate final Notifier messagePublisher; public class TicketService { public Ticket create(Ticket ticket){ messagePublisher.Notify(TicketEventsEnum.TICKET_CREATED); return repository.save(ticket); } } No service, a regra de negócio de criação de um ticket é exatamente essa, note que não estou usando uma regra de rabbitMQ necessariamente, nem mesmo o seu vocabulário (normalmente usaríamos publish) o importante para a regra de criação, é enviar uma notificação!\nA dependência Notifier é na realidade uma interface própria, que representa o que necessitamos, o envio de uma notificação, é uma porta.\npublic interface Notifier { void Notify(Object message); } O Adaptador, que é basicamente uma das opções de notificadores que vc tem é a implementação real, você poderia trocar os adaptadores e ainda assim não ter problemas no seu domínio, tendo em vista que todo adaptadores respeita a mesma interface (porta).\nImagine que você está indo viajar, o núcleo da aplicação é o conteúdo essencial da sua mala - os itens vitais que você não pode deixar para trás. Os adaptadores são os diversos compartimentos e bolsos especializados na mala, cada um projetado para acomodar diferentes necessidades, você tem um plugue para tomadas da europa, outros para os estados unidos e outra que suporta o padrão adotado na ásia (não sei nem se é diferente). Da mesma forma, os adaptadores na arquitetura hexagonal conectam o núcleo da aplicação a interfaces externas variadas, como bancos de dados, interfaces de usuário e serviços externos, esses adaptadores permitem que a aplicação funcione em ambientes diversos.\nClean Architecture Não entrarei em detalhes pela sua complexidade e individualidades, mas saiba que tanto a clean architecture quanto a onion se baseiam no mesmo fundamento, de proteger a camada de domínio, com os mesmos princípios de abstração por interfaces, e adaptadores implementando-as\nDDD - Isso não é sobre DDD O DDD é um conceito extenso e vai além de um sugestões sobre como dividir seu código em camadas (esse nem é o foco), comentando a maneira com que o software é escrito, o que são fronteiras e como elas devem ser implementadas, etc.\nEncare o DDD como uma prescrição de metodologia e processo para o desenvolvimento de sistemas complexos cujo foco é mapear atividades, tarefas, eventos e dados dentro de um domínio de problema nos artefatos de tecnologia de um domínio de solução.\nApesar disso, Evans em seu livro deu diversas sugestões arquiteturais, como por exemplo, os services, muitas vezes, mal utilizados ou interpretados. Veremos agora algumas sugestões e pontos do autor.\nDDD - Sugestões Arquiteturais → e de design de código Antes de tudo, acho importante definir o que é o domínio de uma aplicação:\nDomínio: No contexto de Engenharia de Software é o “conhecimento” utilizado em uma determinada área de aplicação, um campo específico para qual o sistema foi desenvolvido, ou seja, os problemas, regras e soluções que envolvem uma parte da aplicação, apesar disso, muitas vezes nos referimos ao domínio de negócio (núcleo de regras e conhecimentos que envolvem o negócio) somente como domínio, leve isso em consideração, porém tenha em mente que uma aplicação tem diversos domínios.\nQuando o código relacionado ao domínio é distribuído por uma porção tão grande de outros códigos (espalhado), torna-se extremamente difícil distingui-los e raciocinar. Alterações superficiais na interface do usuário podem realmente alterar a lógica de negócios (alterações vazam para onde não devem).\nAssim sendo:\nIsole o modelo do domínio e a lógica de negócios e elimine qualquer dependência que eles possam ter na infraestrutura, na interface do usuário ou mesmo na lógica do aplicativo que não seja lógica de negócios. Particione um programa complexo em camadas. Desenvolva um design dentro de cada camada que seja coeso e que dependa apenas das camadas abaixo. Concentre todo o código relacionado ao modelo do domínio em uma camada e isole-o do código da interface do usuário, do aplicativo e da infraestrutura. Os objetos de domínio, livres da responsabilidade de se exibir, de se armazenar, de gerenciar tarefas do aplicativo, e assim por diante, podem se concentrar em expressar o modelo do domínio. Isso permite que um modelo evolua para se tornar rico e limpo o suficiente para capturar o conhecimento essencial do negócio e colocá-lo para funcionar, sempre que uma regra de negócio surgir, o modelo de domínio deve ser o necessário por implementá-la, quem deve se adaptar às regras de negócio é a implementação, e nunca o contrário.\nDito isso, colocar as responsabilidades certas no domínio não significa que o modelo deve ser anêmico, o modelo pode (e deve) manter regras e formas para que seu escopo seja válido. Ou seja, fazemos o possível para que uma entidade de domínio nasça e continue sempre de acordo com suas regras de negócio.\nConceito muito difundido no artigo **Anemic Domain Model, de Martin Fowler.\nQ**uando falamos de modelos de domínio anêmicos dizemos de modelos onde as regras de negócio muitas vezes fogem das classes de domínio, temos uma classe pedido mas o método para verificar se o pedido contém itens ou não está em um service (normalmente em um application service, ou seja, na camada de aplicação). Classes que possuem somente atributos são classes de domínio anêmicas, idealmente, uma classe deve conter comportamento e atributos.\nPodemos chamar classes JAVA ou C# que são totalmente desacoplada de outras bibliotecas ou framewrks de POCO (no C#) ou POJO (no JAVA). Por serem códigos puros escritos em java ou c#, que não deviram de uma classe base e nem retornam ou utilizam de tipos especiais, ou seja, são classes simples que sabem apenas de seu domínio, devemos sempre seguir os princípios da ignorância da infraestrutura e ignorância da persistência para essas classes.\nPortanto, as entidades não devem ser associadas aos modos de exibição do cliente pois, no nível da interface do usuário, alguns dados podem ainda não ter sido validados. É por esse motivo que o ViewModel existe. O ViewModel é um modelo de dados exclusivamente para necessidades de camada de apresentação. As entidades de domínio não pertencem diretamente ao ViewModel. Em vez disso, você precisa converter entre entidades de domínio e ViewModels e vice-versa. - Projetar um microsserviço orientado a DDD, Microsoft\nRefatorando um Domínio anêmico Atributos distantes do comportamento Para começar, recomendo ler o caso 1 de 3. Refatoração → Casos Usuais, depois volte aqui. De maneira geral, classes devem guardar dentro de si atributos e comportamentos, se você possui comportamentos que agem sobre os atributos de uma classe específica, costuma fazer sentido encapsulá-los dentro da classe.\nExemplo:\nClass ComprarIngressoService{ void comprar(Pessoa pessoa, Evento evento){ ... if(pessoa.idade\u003c18){ // menor de idade } if(pessoa.getCadastro()==\"ativo\"){ // } } } Esse tipo de validação é aparentemente inofensiva, contudo, frágil, pode causar diversas repetições no código e aumentar pontos de contato para uma possível alteração, em alguns casos, esse tipo de erro piora muito a leitura. Faz sentido que a classe Pessoa cuide de propriedades das pessoas, logo, a refatoração a seguir é possível:\nClass ComprarIngressoService{ void comprar(Pessoa pessoa, Evento evento){ ... if(pessoa.maiorDeIdade()){ // menor de idade } if(pessoa.estaAtiva()){ // } } } Construtores, Builders e falta de amor aos erros de compilação Um grande motivo para escrevermos códigos que são fortemente tipados é a possibilidade de perceber erros em tempo de compilação, erros que impedem que façamos coisas que não fazem sentido dado o contexto do que estamos tentando fazer, a semântica de string, por exemplo, entendida como cadeia de caracteres, não permite a soma de números a ela (Some um à kaue).\nDito isto, grande parte das classes de domínio não validam seu estado, muitas vezes nem em sua criação. É comum ver por ai classes com construtores vazios e códigos setters públicos (pois getters e setters teoricamente protegem o encapsulamento) isso por si só não garante que uma classe irá ser usada como esperada, veja o exemplo a seguir.\nclass Pessoa{ Pessoa(){ // construtor vazio, no java é opcional\t} @Getter @Setter // simulando o lombok, mas pode imaginar que são métodos getter e setters públicos private Long id; @Getter @Setter private String nome; @Getter @Setter private Int peso; } // em algum outro lugar: Pessoa kaue = new Pessoa(); kaue.setId(1); kaue.setNome(\"kaue\"); kaue.setPeso(65); // teoricamente kaue está tranquilo levando em conta que todos os campos foram preenchidos, mas e o seguinte? Pessoa douglas = new Pessoa(); douglas.setPeso(70); Não existe erro de compilação e nem de execução (POR ENQUANTO) aqui.\nÉ óbvio que os setters deveriam validar se os campos foram preenchidos de seguindo um certo padrão e que faltam métodos para lidar com o objeto pessoa como indicado no ponto anterior, o modelo está anêmico, mas esse não é o foco, criamos um objeto de uma Pessoa chamado douglas, que possui apenas seu peso definido, o que provavelmente não faz sentido quando pensamos na criação de uma pessoa em um sistema, deveríamos (dependendo do negócio) ao menos forçar o preenchimento de id e nome.\nclass Pessoa{ Pessoa(String id, String nome){ // único construtor recebendo os campos opcionais. this.id=id; this.nome=nome; } @Getter // setter não existe mais private Long id; @Getter // setter pode até existir, mas nesse caso não vou criar. private String nome; @Getter @Setter private Int peso; } // em algum outro lugar: Pessoa kaue = new Pessoa(1,\"kaue\"); kaue.setPeso(65); Pessoa douglas = new Pessoa(); // erro douglas.setPeso(70); Mas e classes builders? Também não é incomum ver builders que esquecem de implementar os campos obrigatórios, para nossa felicidade, é algo simples de ser resolvido.\nPessoaBuilder pessoaBuilder = new PessoaBuilder(1,\"kaue\"); // construtor do BUILDER tem em si os parâmetros necessários para criar a classe que constrói // se o método para pegar o builder for um método estático, só passar em seu parâmetro Pessoa kaue = pessoaBuilder .withPeso(70) .build(); Usando o lombok @Builder, podemos fazer:\nimport lombok.Builder; @Builder(builderMethodName = \"hiddenBuilder\") public class Person { @NotNull private String name; private String surname; public static PersonBuilder builder(String name) { return hiddenBuilder().name(name); // o nome desse builder interno é arbitrário } } // Person p = Person.builder(\"Kaue\").surname(\"Surname\").build(); Essa tática, usando o lombok ou não, tem alguns problemas e normalmente não faz sentido em classes que tem muitos parâmetros obrigatórios e até mesmo em algumas classes simples, pois depreca, mesmo que um pouco, uma das grandes vantagens que a classe builder tem, a visibilidade, imagine isso:\nEndereco e = Endereco.builder(\"Osvaldo Albherto\", \"Parque Bitaru\", \"42\", \"Abilio\") .complemento(\"Ap 1\") .maisInformacoes(\"Pode entregar pro vizinho\") .build(); Somente lendo esse código, você só consegue ter certeza do complemento e maisInformacoes, os outros campos não são tão visíveis, ainda assim, como opinião pessoal, prefiro por ter esse código, que se torna um pouco menos visível mas garante o uso correto da classe, mostrando erros de compilação na própria IDE caso os atributos obrigatórios não estejam preenchidos.\nDomínio Rico e dependências excessivas Se sua classe POJO de domínio necessitar de bibliotecas ou outras dependências (faça-as serem interfaces 🙏), instanciá-la ficará extremamente inconveniente, para isso existe o Design Pattern: Factory\nImagine a existência de uma classe usuário, que necessita que seu próprio email seja validado, e para isso, você quer usar uma biblioteca x ou y, você, respeitando princípios básicos, criará uma interface a qual Usuário dependerá, e fará com que a injeção de dependência passe a você uma instância do validador em algum momento, isso irá se tornar extremamente inconveniente muito rápido, portanto, podemos fazer:\npublic class Usuario { private String email; private EmailValidator emailValidator; public Usuario(String email, EmailValidator emailValidator) { this.email = email; this.emailValidator = emailValidator; } public boolean isEmailValid() { return emailValidator.isValid(email); } // Outros métodos da classe Usuario } public class UsuarioFactory { private final EmailValidator emailValidator; // Construtor com injeção de dependência! public UsuarioFactory(EmailValidator emailValidator) { this.emailValidator = emailValidator; } // Método para criar instância de Usuario usando o validador de e-mail fornecido pelo Spring (ou pelo seu framework de DI) public Usuario createUsuario(String email) { return new Usuario(email, emailValidator); } } Mas e os Services? Evans Descreve em seu livro três tipos de services:\nApplication Service:\nFornece para o usuário operações que o seu software pode executar, e controla a execução dessas operações através de chamadas a métodos de objetos das outras camadas (domínio, infraestrutura, etc.). É importante dizer que a Application Service não contém regras de negócios ou conhecimento do domínio, sendo assim, ela apenas coordena as chamadas a métodos de outras camadas e mantém o estado que reflete o progresso de uma operação para o usuário. Application Layer: Defines the jobs the software is supposed to do and directs the expressive domain objects to work out problems. The tasks this layer is responsible for are meaningful to the business or necessary for interaction with the application layers of other systems. This layer is kept thin. It does not contain business rules or knowledge, but only coordinates tasks and delegates work to collaborations of domain objects in the next layer down. It does not have state reflecting the business situation, but it can have state that reflects the progress of a task for the user or the program. - Evans DDD\nDomain Services:\nFornece para a Application Service métodos que permitam a execução de operações sobre os objetos de Domínio (camada mais interna). Embora seja comum representar grande parte dos conceitos e regras principais do negócio aqui, o ideal é que esses detalhes sejam representados diretamente nos Domain Models. Sendo assim, o Domain Service deve chamar e controlar a execução de métodos dos objetos do Domain Model quando não é trivial ou lógico declarar um método diretamente no modelo de domínio As vezes, a situação simplesmente não se trata de uma coisa.\nAlguns conceitos do domínio não são naturais para serem modelados na forma de objetos.\nForçar a funcionalidade do domínio necessária para que ela seja a responsabilidade de uma Entidade ou Objeto de Valor distorce a definição de um objeto baseado em modelos ou adiciona objetos artificiais sem sentido.\nAssim sendo:\nQuando um processo ou transformação significativa no domínio não é uma responsabilidade natural de uma Entidade ou Objeto de Valor, adicione uma operação no modelo como uma interface autônoma declarada como Serviço. Defina um contrato de serviço, um conjunto de asserções sobre interações com o Serviço. (Veja “asserções”) Torne essas asserções participantes da Linguagem Onipresente de um Contexto Delimitado específico. Dê um nome ao Serviço, que também se torne parte da Linguagem Onipresente. Evans - DDD\nSome people say that the anemic domain model is an anti-pattern. It really depends on what you are implementing. If the microservice you are creating is simple enough (for example, a CRUD service), following the anemic domain model it is not an anti-pattern. However, if you need to tackle the complexity of a microservice’s domain that has a lot of ever-changing business rules, the anemic domain model might be an anti-pattern for that microservice or Bounded Context. In that case, designing it as a rich model with entities containing data plus behavior as well as implementing additional DDD patterns (aggregates, value objects, etc.) might have huge benefits for the long-term success of such a microservice.\nMicrosoft resource Infrastructure Services:\nFornece métodos que permitem a execução de operações sobre a infraestrutura na qual o software está sendo executado. Isso significa que esses serviços tem conhecimento sobre detalhes das implementações concretas da infraestrutura tais como: acesso a bancos de dados, acesso a rede, controle de operações de IO, acesso a hardware etc. Geralmente esse service é utilizado pelos Application Services para complementar e auxiliar suas operações, por exemplo, fornecer um método que permita a criação e controle de um buffer para realizar download de arquivos. Referências: The Software Architecture Chronicles\nEsse blog, essa crônica em específico - é maravilhosa!! Se estiver off, procure no wayback machine.\nDomain Driven Design, Eric Evans\nAnemic Domain Model, Martin Fowler (Cosigned by Evans)\nSumário de Padrões e Definições do DDD - Traduzido por Ricardo Pereira Dias\n","wordCount":"3417","inLanguage":"pt","image":"https://kaue.cat/%3Cimage%20path/url%3E","datePublished":"2023-11-13T12:55:03Z","dateModified":"2023-11-13T12:55:03Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kaue.cat/posts/software-architecture-basics/"},"publisher":{"@type":"Organization","name":"Kaue Gatto","logo":{"@type":"ImageObject","url":"https://kaue.cat/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kaue.cat accesskey=h title="Home (Alt + H)"><img src=https://kaue.cat/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://kaue.cat/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://kaue.cat/archives title=Arquivo><span>Arquivo</span></a></li><li><a href=https://kaue.cat/search/ title=Buscar><span>Buscar</span></a></li><li><a href=https://kaue.cat/series/ title=Séries><span>Séries</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://kaue.cat>Início</a>&nbsp;»&nbsp;<a href=https://kaue.cat/posts/>Posts</a></div><h1 class=post-title>WIP - Arquitetura de Software Básica<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-description>O básico que você como dev precisa conhecer de arquitetura de software! Maior e mais denso post, mas também o mais rico.</div><div class=post-meta><span title='2023-11-13 12:55:03 +0000 UTC'>novembro 13, 2023</span>&nbsp;·&nbsp;17 minutos&nbsp;·&nbsp;3417 palavras&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/kauegatto/kauedotcat/content/posts/software-architecture-basics.md rel="noopener noreferrer" target=_blank>Sugerir Alterações</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Conteúdo</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#monolítos>Monolítos:</a></li><li><a href=#service-oriented-architecture>Service-Oriented Architecture</a></li><li><a href=#microserviços>Microserviços</a></li></ul><ul><li><a href=#modelo-baseado-em-camadas>Modelo Baseado em Camadas</a><ul><li><a href=#mvc>MVC</a></li></ul></li><li><a href=#arquitetura-hexagonal---ports-and-adapters>Arquitetura Hexagonal - Ports And Adapters</a></li><li><a href=#clean-architecture>Clean Architecture</a></li><li><a href=#ddd---isso-não-é-sobre-ddd>DDD - Isso não é sobre DDD</a><ul><li><a href=#ddd---sugestões-arquiteturais--e-de-design-de-código>DDD - Sugestões Arquiteturais → e de design de código</a></li></ul></li><li><a href=#refatorando-um-domínio-anêmico>Refatorando um Domínio anêmico</a><ul><li><a href=#atributos-distantes-do-comportamento>Atributos distantes do comportamento</a></li><li><a href=#construtores-builders-e-falta-de-amor-aos-erros-de-compilação>Construtores, Builders e falta de amor aos erros de compilação</a></li><li><a href=#domínio-rico-e-dependências-excessivas>Domínio Rico e dependências excessivas</a></li><li><a href=#mas-e-os-services>Mas e os Services?</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=arquitetura-de-software---o-básico>Arquitetura de Software - O básico<a hidden class=anchor aria-hidden=true href=#arquitetura-de-software---o-básico>#</a></h1><blockquote><p>Disclaimer: É impossível tratar bem todos os tipos de arquitetura e falar muito sobre arquitetura aqui, o foco desse “Caderno” pessoal não é esse, apesar disso, você provavelmente vai encontrar um bom conteúdo (ao menos introdutório) em partes do design de software e arquitetura que julgo importante.</p></blockquote><p>Esse capítulo é de longe o maior e com uma leitura mais densa, mas segundo a minha visão vale bastante a pena!!</p><p>Se você quer mais aprofundamento em alguma arquitetura, ou até mesmo focar bastante nisso, olhe as referências. O blog do Herberto Graça é meu way-to-go. através da série “The software architecture chronicles”</p><blockquote></blockquote><h1 id=arquitetura-à-nível-de-solução>Arquitetura à Nível de Solução<a hidden class=anchor aria-hidden=true href=#arquitetura-à-nível-de-solução>#</a></h1><h2 id=monolítos>Monolítos:<a hidden class=anchor aria-hidden=true href=#monolítos>#</a></h2><p>Monolítos são basicamente um conjunto de soluções de software agrupadas, de maneiras a qual essas soluções estão <strong>acopladas</strong> por meio de coisas como a própria Linguagem de Programação ou no Deployment, se você, após uma alteração em um ponto específico de uma solução, precisa deployar outros módulos da sua aplicação, eles são monolítos, mesmo que sejam modularizados. Sistemas monolítos basicamente são um “tudo ou nada”, onde, se você necessitar subir o módulo de tickets, vai precisar subir o módulo de email também, pois eles estão acoplados.</p><blockquote><p>**<em>With a monolithic application, if I want to try a new programming language, database, or framework, any change will impact a large amount of my system. With a system consisting of multiple services, I have multiple new places in which to try out a new piece of technology. I can pick a service that is perhaps lowest risk and use the technology there, knowing that I can limit any potential negative impact</em></p></blockquote><p>Building Microservices. Newman, Sam**</p><blockquote></blockquote><h2 id=service-oriented-architecture>Service-Oriented Architecture<a hidden class=anchor aria-hidden=true href=#service-oriented-architecture>#</a></h2><p>Wip!</p><blockquote><p><em><strong>Much has been said about SOA, and there are a few different implementation patterns but, in essence, SOA focuses on only a few concepts and doesn’t give any prescription on how to implement them:
Composability of user-facing applications, Reusable Business Services, Technology stack independent, Autonomy (independent evolution, scalability & deployability).</strong></em></p></blockquote><p><strong><a href=https://herbertograca.com/2017/11/09/service-oriented-architecture-soa/>Service Oriented Architecture.</a> Graça, Herberto</strong></p><blockquote></blockquote><h2 id=microserviços>Microserviços<a hidden class=anchor aria-hidden=true href=#microserviços>#</a></h2><blockquote><p>**<em>[Microservices are] Small autonomous services that work together, modelled around a business domain.</em></p></blockquote><p><a href="https://youtu.be/PFQnNFe27kU?t=1m50s">Principles Of Microservices</a>, Newman, Sam.**</p><blockquote></blockquote><h1 id=arquitetura-à-nível-de-software>Arquitetura à nível de Software<a hidden class=anchor aria-hidden=true href=#arquitetura-à-nível-de-software>#</a></h1><h2 id=modelo-baseado-em-camadas>Modelo Baseado em Camadas<a hidden class=anchor aria-hidden=true href=#modelo-baseado-em-camadas>#</a></h2><p>É bem comum dividirmos nosso software em camadas, é o que fazemos na maior parte das arquiteturas de software modernas, essa divisão tem como objetivo separar partes do código que não devem interagir muito entre si exceto por alguns pontos de contato (que podem ser outras camadas), e também garantir que exista um “meio de campo” entre certas camadas, ou seja, a interface não vai falar diretamente com o banco de dados, existe um caminho para isso.</p><h3 id=mvc>MVC<a hidden class=anchor aria-hidden=true href=#mvc>#</a></h3><p>O MVC (Model-View-Controller) é um pattern arquitetural usado como um molde pra distribuição de responsabilidades em trechos de código que tratam de interfaces com o usuário (UI). Há três responsabilidades pre-estabelecidas:</p><ul><li>View: contém a lógica que monta a UI (telas ou equivalente) e que trata a entrada de dados, recebendo eventos do usuário (clique, digitação etc.). As do usuário são repassadas para o Controller. A View pode buscar dados diretamente do Model para exibição na UL</li><li>Controller. o &ldquo;meio de campo&rdquo;, recebe interações do usuário da View e colabora com o Model para enviar e obter dados, que são repassados para a View.</li><li>Model: o resto do código, que não tem a ver com UI. Realiza cálculos, regras de negócio, persistência, integrações com outros sistemas etc. Há diversas variações como MVP, MVVM, entre outros.</li></ul><blockquote><p>Outros exemplos → <strong>MVVM</strong>
The main thrust of the Model/View/ViewModel architecture seems to be that on top of the data (”the Model”), there’s another layer of non-visual components (”the ViewModel”) that map the concepts of the data more closely to the concepts of the view of the data (”the View”). It’s the ViewModel that the View binds to, not the Model directly.</p></blockquote><h2 id=arquitetura-hexagonal---ports-and-adapters>Arquitetura Hexagonal - Ports And Adapters<a hidden class=anchor aria-hidden=true href=#arquitetura-hexagonal---ports-and-adapters>#</a></h2><p>A arquitetura hexagonal é uma proposta de arquitetura de software que segue lógicas de desenvolvimento de software que pensam em acoplamento e coesão, basicamente, módulos de alto nível (que possuem regras de negócio) não devem depender de implementações de módulos de baixo nível (frameworks, bibliotecas de terceiros, et cetera.). Tudo que acessa o coração / domínio / regra de negócio da sua aplicação deve passar por portas, que são basicamente interfaces que representam o que aquela biblioteca fará para você, chamamos a implementação dessas interfaces de adaptadores.</p><p>Ou seja, em um sistema de login, podemos disparar um evento em uma fila de mensagens RabbitMQ que será consumido por um outro serviço de notificação, pensando em um nível um pouco mais abstrato, esquecendo bibliotecas ou ferramentas, podemos criar uma interface de publicador de eventos e dizer que vamos usar ela, ou seja, nossa lógica de negócio precisa enviar uma notificação de cadastro e um payload, independente se rabbitMQ, kafka ou outra porta está sendo usada:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>final</span> <span class=n>Notifier</span> <span class=n>messagePublisher</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>TicketService</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>Ticket</span> <span class=nf>create</span><span class=o>(</span><span class=n>Ticket</span> <span class=n>ticket</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>messagePublisher</span><span class=o>.</span><span class=na>Notify</span><span class=o>(</span><span class=n>TicketEventsEnum</span><span class=o>.</span><span class=na>TICKET_CREATED</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>repository</span><span class=o>.</span><span class=na>save</span><span class=o>(</span><span class=n>ticket</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>No <strong>service</strong>, a regra de negócio de criação de um ticket é exatamente essa, note que não estou usando uma regra de rabbitMQ necessariamente, nem mesmo o seu vocabulário (normalmente usaríamos publish) o importante para a regra de criação, é enviar uma notificação!</p><p>A dependência Notifier é na realidade uma interface própria, que representa o que necessitamos, o envio de uma notificação, é uma porta.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Notifier</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>Notify</span><span class=o>(</span><span class=n>Object</span> <span class=n>message</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>O Adaptador, que é basicamente uma das opções de notificadores que vc tem é a implementação real, você poderia trocar os adaptadores e ainda assim não ter problemas no seu domínio, tendo em vista que todo adaptadores respeita a mesma interface (porta).</p><p>Imagine que você está indo viajar, o núcleo da aplicação é o conteúdo essencial da sua mala - os itens vitais que você não pode deixar para trás. Os adaptadores são os diversos compartimentos e bolsos especializados na mala, cada um projetado para acomodar diferentes necessidades, você tem um plugue para tomadas da europa, outros para os estados unidos e outra que suporta o padrão adotado na ásia (não sei nem se é diferente). Da mesma forma, os adaptadores na arquitetura hexagonal conectam o núcleo da aplicação a interfaces externas variadas, como bancos de dados, interfaces de usuário e serviços externos, esses adaptadores permitem que a aplicação funcione em ambientes diversos.</p><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a22fpgbhkto3xwvsi5mr.png alt=Hexagonal></p><h2 id=clean-architecture>Clean Architecture<a hidden class=anchor aria-hidden=true href=#clean-architecture>#</a></h2><p>Não entrarei em detalhes pela sua complexidade e individualidades, mas saiba que tanto a clean architecture quanto a onion se baseiam no mesmo fundamento, de proteger a camada de domínio, com os mesmos princípios de abstração por interfaces, e adaptadores implementando-as</p><h2 id=ddd---isso-não-é-sobre-ddd>DDD - Isso não é sobre DDD<a hidden class=anchor aria-hidden=true href=#ddd---isso-não-é-sobre-ddd>#</a></h2><p>O DDD é um conceito extenso e vai além de um sugestões sobre como dividir seu código em camadas (esse nem é o foco), comentando a maneira com que o software é escrito, o que são fronteiras e como elas devem ser implementadas, etc.</p><p>Encare o DDD como uma <em>prescrição de metodologia e <strong>processo</strong></em> para o desenvolvimento de sistemas complexos cujo foco é mapear atividades, tarefas, eventos e dados dentro de um domínio de problema nos artefatos de tecnologia de um domínio de solução.</p><p>Apesar disso, <strong>Evans em seu livro deu diversas sugestões arquiteturais, como por exemplo, os services,</strong> muitas vezes, mal utilizados ou interpretados. Veremos agora algumas sugestões e pontos do autor.</p><h3 id=ddd---sugestões-arquiteturais--e-de-design-de-código>DDD - Sugestões Arquiteturais → e de design de código<a hidden class=anchor aria-hidden=true href=#ddd---sugestões-arquiteturais--e-de-design-de-código>#</a></h3><p>Antes de tudo, acho importante definir o que é o domínio de uma aplicação:</p><blockquote><p><strong>Domínio:</strong>
No contexto de Engenharia de Software é o “conhecimento” utilizado em uma determinada área de aplicação, um campo específico para qual o sistema foi desenvolvido, ou seja, os problemas, regras e soluções que envolvem uma parte da aplicação, apesar disso, muitas vezes nos referimos ao domínio de negócio (núcleo de regras e conhecimentos que envolvem o negócio) somente como domínio, leve isso em consideração, porém tenha em mente que uma aplicação tem diversos domínios.</p></blockquote><p>Quando o código relacionado <strong>ao domínio</strong> é distribuído por uma porção tão grande de outros códigos (espalhado), torna-se extremamente difícil distingui-los e raciocinar. Alterações superficiais na interface do usuário podem realmente alterar a lógica de negócios (alterações vazam para onde não devem).</p><p><strong>Assim sendo:</strong></p><p><strong>Isole o modelo do domínio e a lógica de negócios e elimine qualquer dependência que eles possam ter na infraestrutura, na interface do usuário ou mesmo na lógica do aplicativo que não seja lógica de negócios.
Particione um programa complexo em camadas. Desenvolva um design dentro de cada camada que seja coeso e que dependa apenas das camadas abaixo.</strong> Concentre todo o código relacionado ao modelo do domínio em uma camada e isole-o do código da interface do usuário, do aplicativo e da infraestrutura. Os objetos de domínio, livres da responsabilidade de se exibir, de se armazenar, de gerenciar tarefas do aplicativo, e assim por diante, podem se concentrar em expressar o modelo do domínio. Isso permite que um modelo evolua para se tornar rico e limpo o suficiente para capturar o conhecimento essencial do negócio e colocá-lo para funcionar, sempre que uma regra de negócio surgir, o modelo de domínio deve ser o necessário por implementá-la, quem deve se adaptar às regras de negócio é a implementação, e nunca o contrário.</p><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/phu7ce3a1l0cb1qo5fgg.png alt="Layers in a DDD architecture"></p><p><strong>Dito isso, colocar as responsabilidades certas no domínio não significa que o modelo deve ser anêmico, o modelo pode (e deve) manter regras e formas para que seu escopo seja válido. Ou seja, fazemos o possível para que uma entidade de domínio nasça e continue sempre de acordo com suas regras de negócio.</strong></p><blockquote><p>Conceito muito difundido no artigo **Anemic Domain Model, de Martin Fowler.</p></blockquote><p>Q**uando falamos de modelos de domínio anêmicos dizemos de modelos onde as regras de negócio muitas vezes fogem das classes de domínio, temos uma classe pedido mas o método para verificar se o pedido contém itens ou não está em um service (normalmente em um application service, ou seja, na camada de aplicação).
Classes que possuem somente atributos são classes de domínio anêmicas, idealmente, uma classe deve conter comportamento e atributos.</p><blockquote><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2fj54fsrz9aj03rl1648.png alt="Domain Entity"></p></blockquote><p>Podemos chamar classes JAVA ou C# que são totalmente desacoplada de outras bibliotecas ou framewrks de POCO (no C#) ou POJO (no JAVA). Por serem códigos puros escritos em java ou c#, que não deviram de uma classe base e nem retornam ou utilizam de tipos especiais, ou seja, são classes simples que sabem apenas de seu domínio, <strong>devemos sempre seguir os princípios da <a href=https://ayende.com/blog/3137/infrastructure-ignorance>ignorância da infraestrutura</a> e <a href=https://deviq.com/principles/persistence-ignorance>ignorância da persistência</a> para essas classes.</strong></p><blockquote><p>Portanto, as entidades não devem ser associadas aos modos de exibição do cliente pois, no nível da interface do usuário, alguns dados podem ainda não ter sido validados. É por esse motivo que o ViewModel existe. O ViewModel é um modelo de dados exclusivamente para necessidades de camada de apresentação. As entidades de domínio não pertencem diretamente ao ViewModel. Em vez disso, você precisa converter entre entidades de domínio e ViewModels e vice-versa. - <strong><strong>Projetar um microsserviço orientado a DDD, Microsoft</strong></strong></p></blockquote><h2 id=refatorando-um-domínio-anêmico>Refatorando um Domínio anêmico<a hidden class=anchor aria-hidden=true href=#refatorando-um-domínio-anêmico>#</a></h2><h3 id=atributos-distantes-do-comportamento>Atributos distantes do comportamento<a hidden class=anchor aria-hidden=true href=#atributos-distantes-do-comportamento>#</a></h3><p>Para começar, recomendo ler o caso 1 de <a href="https://www.notion.so/3-Refatora-o-Casos-Usuais-03076ae1673a41a39e0c8182df7b230c?pvs=21">3. Refatoração → Casos Usuais</a>, depois volte aqui. De maneira geral, classes devem guardar dentro de si atributos e comportamentos, se você possui comportamentos que agem sobre os atributos de uma classe específica, costuma fazer sentido encapsulá-los dentro da classe.</p><p>Exemplo:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Class</span> <span class=n>ComprarIngressoService</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span> <span class=nf>comprar</span><span class=o>(</span><span class=n>Pessoa</span> <span class=n>pessoa</span><span class=o>,</span> <span class=n>Evento</span> <span class=n>evento</span><span class=o>){</span>
</span></span><span class=line><span class=cl>		<span class=o>...</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=o>(</span><span class=n>pessoa</span><span class=o>.</span><span class=na>idade</span><span class=o>&lt;</span><span class=mi>18</span><span class=o>){</span>
</span></span><span class=line><span class=cl>			<span class=c1>// menor de idade
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=o>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=o>(</span><span class=n>pessoa</span><span class=o>.</span><span class=na>getCadastro</span><span class=o>()==</span><span class=s>&#34;ativo&#34;</span><span class=o>){</span>
</span></span><span class=line><span class=cl>			<span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Esse tipo de validação é aparentemente inofensiva, contudo, frágil, pode causar diversas repetições no código e aumentar pontos de contato para uma possível alteração, em alguns casos, esse tipo de erro piora muito a leitura. Faz sentido que a classe Pessoa cuide de propriedades das pessoas, logo, a refatoração a seguir é possível:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Class</span> <span class=n>ComprarIngressoService</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span> <span class=nf>comprar</span><span class=o>(</span><span class=n>Pessoa</span> <span class=n>pessoa</span><span class=o>,</span> <span class=n>Evento</span> <span class=n>evento</span><span class=o>){</span>
</span></span><span class=line><span class=cl>		<span class=o>...</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=o>(</span><span class=n>pessoa</span><span class=o>.</span><span class=na>maiorDeIdade</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>			<span class=c1>// menor de idade
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=o>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=o>(</span><span class=n>pessoa</span><span class=o>.</span><span class=na>estaAtiva</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>			<span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=construtores-builders-e-falta-de-amor-aos-erros-de-compilação>Construtores, Builders e falta de amor aos erros de compilação<a hidden class=anchor aria-hidden=true href=#construtores-builders-e-falta-de-amor-aos-erros-de-compilação>#</a></h3><p>Um grande motivo para escrevermos códigos que são fortemente tipados é a possibilidade de perceber erros em tempo de compilação, erros que impedem que façamos coisas que não fazem sentido dado o contexto do que estamos tentando fazer, a semântica de string, por exemplo, entendida como cadeia de caracteres, não permite a soma de números a ela (<strong>Some</strong> um à kaue).</p><p>Dito isto, grande parte das classes de domínio não validam seu estado, muitas vezes nem em sua criação. É comum ver por ai classes com construtores vazios e códigos setters públicos (pois getters e setters <strong>teoricamente</strong> protegem o encapsulamento) isso por si só não garante que uma classe irá ser usada como esperada, veja o exemplo a seguir.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Pessoa</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Pessoa</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// construtor vazio, no java é opcional	
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Setter</span> <span class=c1>// simulando o lombok, mas pode imaginar que são métodos getter e setters públicos
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>private</span> <span class=n>Long</span>  <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Setter</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>String</span> <span class=n>nome</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Setter</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>Int</span> <span class=n>peso</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// em algum outro lugar:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Pessoa</span> <span class=n>kaue</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Pessoa</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>kaue</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>kaue</span><span class=o>.</span><span class=na>setNome</span><span class=o>(</span><span class=s>&#34;kaue&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>kaue</span><span class=o>.</span><span class=na>setPeso</span><span class=o>(</span><span class=mi>65</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>// teoricamente kaue está tranquilo levando em conta que todos os campos foram preenchidos, mas e o seguinte?
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Pessoa</span> <span class=n>douglas</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Pessoa</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>douglas</span><span class=o>.</span><span class=na>setPeso</span><span class=o>(</span><span class=mi>70</span><span class=o>);</span>
</span></span></code></pre></div><p>Não existe erro de compilação e nem de execução (POR ENQUANTO) aqui.</p><p>É óbvio que os setters deveriam validar se os campos foram preenchidos de seguindo um certo padrão e que faltam métodos para lidar com o objeto pessoa como indicado no ponto anterior, o modelo está anêmico, mas esse não é o foco, criamos um objeto de uma Pessoa chamado douglas, que possui apenas seu peso definido, o que provavelmente não faz sentido quando pensamos na criação de uma pessoa em um sistema, deveríamos (dependendo do negócio) ao menos forçar o preenchimento de id e nome.</p><hr><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Pessoa</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Pessoa</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>nome</span><span class=o>){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// único construtor recebendo os campos opcionais.
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>this</span><span class=o>.</span><span class=na>id</span><span class=o>=</span><span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>nome</span><span class=o>=</span><span class=n>nome</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=c1>// setter não existe mais
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=c1>// setter pode até existir, mas nesse caso não vou criar.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>private</span> <span class=n>String</span> <span class=n>nome</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Getter</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Setter</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>Int</span> <span class=n>peso</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// em algum outro lugar:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Pessoa</span> <span class=n>kaue</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Pessoa</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=s>&#34;kaue&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>kaue</span><span class=o>.</span><span class=na>setPeso</span><span class=o>(</span><span class=mi>65</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Pessoa</span> <span class=n>douglas</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Pessoa</span><span class=o>();</span> <span class=c1>// erro
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>douglas</span><span class=o>.</span><span class=na>setPeso</span><span class=o>(</span><span class=mi>70</span><span class=o>);</span>
</span></span></code></pre></div><p>Mas e classes builders? Também não é incomum ver builders que esquecem de implementar os campos obrigatórios, para nossa felicidade, é algo simples de ser resolvido.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>PessoaBuilder</span> <span class=n>pessoaBuilder</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PessoaBuilder</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=s>&#34;kaue&#34;</span><span class=o>);</span> <span class=c1>// construtor do BUILDER tem em si os parâmetros necessários para criar a classe que constrói
</span></span></span><span class=line><span class=cl><span class=c1>// se o método para pegar o builder for um método estático, só passar em seu parâmetro
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Pessoa</span> <span class=n>kaue</span> <span class=o>=</span> <span class=n>pessoaBuilder</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>withPeso</span><span class=o>(</span><span class=mi>70</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Usando o lombok @Builder, podemos fazer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>lombok.Builder</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Builder</span><span class=o>(</span><span class=n>builderMethodName</span> <span class=o>=</span> <span class=s>&#34;hiddenBuilder&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Person</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=nd>@NotNull</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>surname</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>PersonBuilder</span> <span class=nf>builder</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>hiddenBuilder</span><span class=o>().</span><span class=na>name</span><span class=o>(</span><span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>				<span class=c1>// o nome desse builder interno é arbitrário
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Person</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Person</span><span class=o>.</span><span class=na>builder</span><span class=o>(</span><span class=s>&#34;Kaue&#34;</span><span class=o>).</span><span class=na>surname</span><span class=o>(</span><span class=s>&#34;Surname&#34;</span><span class=o>).</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Essa tática, usando o lombok ou não, tem alguns problemas e normalmente não faz sentido em classes que tem muitos parâmetros obrigatórios e até mesmo em algumas classes simples, pois depreca, mesmo que um pouco, uma das grandes vantagens que a classe builder tem, a visibilidade, imagine isso:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Endereco</span> <span class=n>e</span> <span class=o>=</span> <span class=n>Endereco</span><span class=o>.</span><span class=na>builder</span><span class=o>(</span><span class=s>&#34;Osvaldo Albherto&#34;</span><span class=o>,</span> <span class=s>&#34;Parque Bitaru&#34;</span><span class=o>,</span> <span class=s>&#34;42&#34;</span><span class=o>,</span> <span class=s>&#34;Abilio&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>.</span><span class=na>complemento</span><span class=o>(</span><span class=s>&#34;Ap 1&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>.</span><span class=na>maisInformacoes</span><span class=o>(</span><span class=s>&#34;Pode entregar pro vizinho&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Somente lendo esse código, você só consegue ter certeza do complemento e maisInformacoes, os outros campos não são tão visíveis, ainda assim, como opinião pessoal, prefiro por ter esse código, que se torna um pouco menos visível mas garante o uso correto da classe, mostrando erros de compilação na própria IDE caso os atributos obrigatórios não estejam preenchidos.</p><h3 id=domínio-rico-e-dependências-excessivas>Domínio Rico e dependências excessivas<a hidden class=anchor aria-hidden=true href=#domínio-rico-e-dependências-excessivas>#</a></h3><p>Se sua classe POJO de domínio necessitar de bibliotecas ou outras dependências (faça-as serem interfaces 🙏), instanciá-la ficará extremamente inconveniente, para isso existe o <strong>Design Pattern: Factory</strong></p><p>Imagine a existência de uma classe usuário, que necessita que seu próprio email seja validado, e para isso, você quer usar uma biblioteca x ou y, você, respeitando princípios básicos, criará uma interface a qual Usuário dependerá, e fará com que a injeção de dependência passe a você uma instância do validador em algum momento, isso irá se tornar <strong>extremamente</strong> inconveniente muito rápido, portanto, podemos fazer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Usuario</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>email</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>EmailValidator</span> <span class=n>emailValidator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Usuario</span><span class=o>(</span><span class=n>String</span> <span class=n>email</span><span class=o>,</span> <span class=n>EmailValidator</span> <span class=n>emailValidator</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>email</span> <span class=o>=</span> <span class=n>email</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>emailValidator</span> <span class=o>=</span> <span class=n>emailValidator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isEmailValid</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>emailValidator</span><span class=o>.</span><span class=na>isValid</span><span class=o>(</span><span class=n>email</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Outros métodos da classe Usuario
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UsuarioFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>final</span> <span class=n>EmailValidator</span> <span class=n>emailValidator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Construtor com injeção de dependência!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>public</span> <span class=nf>UsuarioFactory</span><span class=o>(</span><span class=n>EmailValidator</span> <span class=n>emailValidator</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>emailValidator</span> <span class=o>=</span> <span class=n>emailValidator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Método para criar instância de Usuario usando o validador de e-mail fornecido pelo Spring (ou pelo seu framework de DI)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>public</span> <span class=n>Usuario</span> <span class=nf>createUsuario</span><span class=o>(</span><span class=n>String</span> <span class=n>email</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Usuario</span><span class=o>(</span><span class=n>email</span><span class=o>,</span> <span class=n>emailValidator</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=mas-e-os-services>Mas e os Services?<a hidden class=anchor aria-hidden=true href=#mas-e-os-services>#</a></h3><p>Evans Descreve em seu livro três tipos de services:</p><p><strong>Application Service</strong>:</p><ul><li>Fornece para o usuário operações que o seu software pode executar, e controla a execução dessas operações através de chamadas a métodos de objetos das outras camadas (domínio, infraestrutura, etc.). <strong>É importante dizer que a Application Service não contém regras de negócios ou conhecimento do domínio</strong>, sendo assim, ela apenas coordena as chamadas a métodos de outras camadas e mantém o estado que reflete o progresso de uma operação para o usuário.</li></ul><blockquote><p>Application Layer: Defines the jobs the software is supposed to do and directs the expressive domain objects to work out problems. The tasks this layer is responsible for are meaningful to the business or necessary for interaction with the application layers of other systems. This layer is kept thin. It does not contain business rules or knowledge, but only coordinates tasks and delegates work to collaborations of domain objects in the next layer down. It does not have state reflecting the business situation, but it can have state that reflects the progress of a task for the user or the program. - Evans DDD</p></blockquote><p><strong>Domain Services</strong>:</p><ul><li>Fornece para a <strong>Application Service</strong> métodos que permitam a execução de operações sobre os objetos de Domínio (camada mais interna). <strong>Embora seja comum representar grande parte dos conceitos e regras principais do negócio aqui, o ideal é que esses detalhes sejam representados diretamente nos Domain Models.</strong> Sendo assim, o Domain Service deve chamar e controlar a execução de métodos dos objetos do Domain Model <strong>quando não é trivial ou lógico declarar um método diretamente no modelo de domínio</strong></li></ul><blockquote><p>As vezes, a situação simplesmente não se trata de uma coisa.</p><p>Alguns conceitos do domínio não são naturais para serem modelados na forma de objetos.</p><p>Forçar a funcionalidade do domínio necessária para que ela seja a responsabilidade de uma Entidade ou Objeto de Valor distorce a definição de um objeto baseado em modelos ou adiciona objetos artificiais sem sentido.</p><p>Assim sendo:</p><p>Quando um processo ou transformação significativa no domínio não é uma responsabilidade natural de uma Entidade ou Objeto de Valor, adicione uma operação no modelo como uma interface autônoma declarada como Serviço. Defina um contrato de serviço, um conjunto de asserções sobre interações com o Serviço. (Veja “asserções”) Torne essas asserções participantes da Linguagem Onipresente de um Contexto Delimitado específico. Dê um nome ao Serviço, que também se torne parte da Linguagem Onipresente.
Evans - DDD</p></blockquote><blockquote><p>Some people say that the anemic domain model is an anti-pattern. It really depends on what you are implementing. If the microservice you are creating is simple enough (for example, a CRUD service), following the anemic domain model it is not an anti-pattern. However, if you need to tackle the complexity of a microservice’s domain that has a lot of ever-changing business rules, the anemic domain model might be an anti-pattern for that microservice or Bounded Context. In that case, designing it as a rich model with entities containing data plus behavior as well as implementing additional DDD patterns (aggregates, value objects, etc.) might have huge benefits for the long-term success of such a microservice.</p></blockquote><ul><li>Microsoft resource</li></ul><blockquote></blockquote><p><strong>Infrastructure Services</strong>:</p><ul><li>Fornece métodos que permitem a execução de operações sobre a infraestrutura na qual o software está sendo executado. Isso significa que esses serviços tem conhecimento sobre detalhes das implementações concretas da infraestrutura tais como: acesso a bancos de dados, acesso a rede, controle de operações de IO, acesso a hardware etc. Geralmente esse service é utilizado pelos Application Services para complementar e auxiliar suas operações, por exemplo, fornecer um método que permita a criação e controle de um buffer para realizar download de arquivos.</li></ul><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2vd4gozuukdgr4jhar65.png alt="Dependency Between Layers"></p><h1 id=referências>Referências:<a hidden class=anchor aria-hidden=true href=#referências>#</a></h1><p><a href=https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/>The Software Architecture Chronicles</a></p><p>Esse blog, essa crônica em específico - é maravilhosa!! Se estiver off, procure no wayback machine.</p><p>Domain Driven Design, Eric Evans</p><p><a href=https://martinfowler.com/bliki/AnemicDomainModel.html>Anemic Domain Model, Martin Fowler (Cosigned by Evans)</a></p><p>Sumário de Padrões e Definições do DDD - Traduzido por Ricardo Pereira Dias</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://kaue.cat/tags/archtecture/>ARCHTECTURE</a></li><li><a href=https://kaue.cat/tags/oop/>OOP</a></li><li><a href=https://kaue.cat/tags/microservices/>Microservices</a></li><li><a href=https://kaue.cat/tags/ddd/>DDD</a></li></ul><nav class=paginav><a class=next href=https://kaue.cat/posts/solid/><span class=title>Próxima Página »</span><br><span>SOLID! Um Post Aprofundado</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share WIP - Arquitetura de Software Básica on x" href="https://x.com/intent/tweet/?text=WIP%20-%20Arquitetura%20de%20Software%20B%c3%a1sica&url=https%3a%2f%2fkaue.cat%2fposts%2fsoftware-architecture-basics%2f&hashtags=ARCHTECTURE%2cOOP%2cMicroservices%2cDDD"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share WIP - Arquitetura de Software Básica on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fkaue.cat%2fposts%2fsoftware-architecture-basics%2f&title=WIP%20-%20Arquitetura%20de%20Software%20B%c3%a1sica&summary=WIP%20-%20Arquitetura%20de%20Software%20B%c3%a1sica&source=https%3a%2f%2fkaue.cat%2fposts%2fsoftware-architecture-basics%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share WIP - Arquitetura de Software Básica on whatsapp" href="https://api.whatsapp.com/send?text=WIP%20-%20Arquitetura%20de%20Software%20B%c3%a1sica%20-%20https%3a%2f%2fkaue.cat%2fposts%2fsoftware-architecture-basics%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></div></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//www-kaue-cat.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2023 <a href=https://kaue.cat>Kaue Gatto</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>