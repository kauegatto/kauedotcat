<!doctype html><html lang=pt dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>O que s√£o microservi√ßos? Para que servem e quando usar? | Kaue Gatto</title><meta name=keywords content="ARCHITECTURE,Microservicos"><meta name=description content="Introdu√ß√£o boa sobre microservi√ßos! Aqui temos ü§ì‚òùÔ∏è"><meta name=author content="Me"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="G-6MZTJBEG75"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico><link rel=apple-touch-icon href=https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico><link rel=mask-icon href=https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=pt href=https://kaue.cat/posts/microservicos/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6MZTJBEG75"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6MZTJBEG75",{anonymize_ip:!1})}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-6MZTJBEG75","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6MZTJBEG75"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6MZTJBEG75",{anonymize_ip:!1})}</script><meta property="og:title" content="O que s√£o microservi√ßos? Para que servem e quando usar?"><meta property="og:description" content="Introdu√ß√£o boa sobre microservi√ßos! Aqui temos ü§ì‚òùÔ∏è"><meta property="og:type" content="article"><meta property="og:url" content="https://kaue.cat/posts/microservicos/"><meta property="og:image" content="https://th.bing.com/th/id/OIG3.yHCJxyinUPawgW65r1mp?pid=ImgGn"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-07T20:14:12+00:00"><meta property="article:modified_time" content="2024-05-07T20:14:12+00:00"><meta property="og:site_name" content="Kaue Gatto - Blog de Desenvolvimento"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://th.bing.com/th/id/OIG3.yHCJxyinUPawgW65r1mp?pid=ImgGn"><meta name=twitter:title content="O que s√£o microservi√ßos? Para que servem e quando usar?"><meta name=twitter:description content="Introdu√ß√£o boa sobre microservi√ßos! Aqui temos ü§ì‚òùÔ∏è"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kaue.cat/posts/"},{"@type":"ListItem","position":3,"name":"O que s√£o microservi√ßos? Para que servem e quando usar?","item":"https://kaue.cat/posts/microservicos/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"O que s√£o microservi√ßos? Para que servem e quando usar?","name":"O que s√£o microservi√ßos? Para que servem e quando usar?","description":"Introdu√ß√£o boa sobre microservi√ßos! Aqui temos ü§ì‚òùÔ∏è","keywords":["ARCHITECTURE","Microservicos"],"articleBody":"Disclaimer: Esse artigo √© baseado totalmente no Livro Building Microservices, do Sam Newman!\nVis√£o Geral Microservi√ßos s√£o partes independentes entre si que s√£o modeladas em torno de uma regra de neg√≥cio. Um servi√ßo encapsula uma funcionalidade e permite que ela seja acess√≠vel por uma rede atrav√©s de requisi√ß√µes REST.\nMicroservi√ßos s√£o um tipo de arquiteturas orientadas a servi√ßo, onde fronteiras entre servi√ßos devem ser tra√ßadas, mas apesar disso o release independente √© chave.\nDo lado de fora, um microservi√ßo √© uma caixa preta, exceto por seus endpoints expostos.\n[‚ùó] Importante Como o ideal √© que a implementa√ß√£o interna do microservi√ßo seja alheia ao mundo exterior, cada microservi√ßo idealmente deve se importar apenas com sua linguagem de programa√ß√£o, com seu banco de dados e outros detalhes internos de implementa√ß√£o. N√£o necessariamente isso ser√° a verdade em um mundo real, nesses casos, precisamos nos preocupar principalmente com acessos concorrentes. Locks distribu√≠dos podem ser uma tacada boa para lidar com recursos compartilhados entre m√∫ltiplos servi√ßos\nComo microservi√ßos se baseiam muito na oculta√ß√£o de informa√ß√£o, expondo somente o necess√°rio atrav√©s de interfaces externas, permitem uma maior vis√£o no que pode ou n√£o mudar facilmente. O c√≥digo interno de um microservi√ßo pode mudar a vontade desde que as interfaces externas n√£o mudem seu comportamento.\nPontos-Chave sobre microservi√ßos! Deploy Independente Essa √© a ideia que conseguimos mudar um microservi√ßo e dar deploy nele sem termos que fazer deploy em qualquer outro microservi√ßo, na realidade, √© o jeito que devemos tratar os microservi√ßos, n√£o somente o que podemos fazer.\nPara isso acontecer, devemos ter certeza que nossos microservi√ßos est√£o pouco acoplados . Isso significa que o contrato entre os servi√ßos devem ser expl√≠citos e est√°veis. Algumas escolhas de implementa√ß√£o podem tornar isso invi√°vel, como por exemplo o compartilhamento de banco de dados.\nModelados ao redor de um dom√≠nio do neg√≥cio Microservi√ßos s√£o modelados ao redor de seu dom√≠nio, para resolver um problema em espec√≠fico. Isso ajuda bastante na separa√ß√£o e no entendimento do dom√≠nio.\nDonos de seu pr√≥prio estado Microservi√ßos devem ter dentro de si todos os seus dados importantes, por isso o t√≥pico anterior √© importante na hora de delimitar as fun√ß√µes de um microservi√ßo. Um microservi√ßo deve ser capaz de conversar com outro para pedir a ele alguma informa√ß√£o que n√£o possui, isso deve acontecer via a interface externa desse outro microservi√ßo, o que garante o deploy independente desses servi√ßos\nFlexibilidade Microservi√ßos te compram op√ß√µes, no sentido que elas tem um pre√ßo. Mais microservi√ßos, na via de regra, te oferecem mais flexibilidade, contudo, tamb√©m s√£o mais dif√≠ceis de manusear. O tamanho dos microservi√ßos n√£o √© algo t√£o importante quanto a pergunta de quantos microservi√ßos voc√™ consegue administrar e de que forma voc√™ faz isso sem que eles sejam uma bagun√ßa acoplada.\nManeira de trabalho com microservi√ßos Tecnologias s√£o importantes, mas cuidado Normalmente √© mais produtivo ir incluindo novas tecnologias que d√£o suporte √† microservi√ßos conforme seu sistema cres√ßa e mais servi√ßos apare√ßam, contudo, algumas ferramentas s√£o essenciais, como por exemplo um agregador de log, ou outras ferramentas que s√£o capazes de visualizar traces entre multiplo servi√ßos, detectar gargalos, etc.\nContainers e Kubernetes Idealmente, cada microservi√ßo deve ser rodado isoladamente, garantindo que um problema em um microservi√ßo n√£o possa afetar outro, por isso, containers s√£o a maneira mais vi√°vel de se utilizar os microservi√ßos.\nDepois de implementar os microservi√ßos. provavelmente ser√° dific√≠cil de administr√°-los, por isso, √© ideal a utiliza√ß√£o de ferramentas que servem para a orquestra√ß√£o desses containers, kubernetes √© a ferramenta mais conhecida para tal.\nStreaming Embora microservi√ßos sejam uma maneira de migrar de bases de dados monol√≠ticas, ainda precisamos encontrar maneiras de transferir informa√ß√µes entre microservi√ßos, ao mesmo tempo que organiza√ß√µes buscam cada vez mais feedbacks em tempo real. Existem muitas ferramentas que ajudam em tal cen√°rio, o apache kafka e rabbitMQ s√£o ferramentas comuns para isso.\nVantagens de microservi√ßos Tecnologias Heterog√™neas Com um sistema composto por diversas partes que conseguem trabalhar isoladamente e apenas externalizar uma interface, conseguimos programar essas partes com tecnologias totalmente diferentes, desde que o contrato entre os servi√ßos sejam mantidos. Isso nos permite escolher a ferramenta correta para cada servi√ßo.\nRobustez Microservi√ßos s√£o capazes de lidar com falhas em determinados setores espec√≠ficos sem com que toda a aplica√ß√£o morra ( o que usualmente acontece em monolitos ). Com os microservi√ßos implementados corretamente, conseguimos lidar com uma falha total em um servi√ßo e apenas fazer com que uma parte do sistema n√£o funcione perfeitamente. Se o sistema de busca da netflix falhar, voc√™ ainda √© capaz de assistir filmes, criar contas, realizar pagamentos e afins.\nScaling Uma arquitetura baseada em microservi√ßos possibilita o ‚Äúscaling‚Äù de coisas isoladamente, onde podemos dedicar mais hardware a partes que realmente necessitam daquilo, e sistemas mais fracos a grupos de servi√ßos menos utilizados.\nO autor d√° um exemplo do marketplace multimilion√°rio focado em modas ‚ÄúGilt‚Äô, e diz que essa foi a principal raz√£o para a Gilt aderir aos microservi√ßos, o mesmo diz que a empresa hoje possui mais de 450 microservi√ßos.\nFacilidade no Deploy Uma altera√ß√£o em uma linha de c√≥digo em um sistema monolito normalmente pede que o sistema todo passe por um deploy novamente, contudo, gra√ßas a caracter√≠stica de deploys independentes, isso n√£o acontece com os microservi√ßos\nAlinhamento organizacional Essa quest√£o √© √≥bvia para times grandes de desenvolvimento, separar equipes em partes espec√≠ficas que trabalham com produtos que podem ser melhorados sem necessitar grande movimenta√ß√µes de outras equipes desde que o contrato pr√© estabelecido continue sendo respeitado √© maravilhoso.\nComposi√ß√£o Microservi√ßos podem ser usados em diferentes ambientes e usados em conjuntos para obtermos resultados espec√≠ficos, ajudam no re√∫so de c√≥digo e na efici√™ncia.\nPontos de Dor / Fraquezas [üìã Cita√ß√£o] We‚Äôll be covering many of these issues in depth throughout the rest of the book‚Äîin fact, I‚Äôd argue that the bulk of this book is about dealing with the pain, suffering, and horror of owning a microservice architecture.‚Äù - Autor do Livro Building Microservices, usado como base.\nExperi√™ncia do Desenvolvedor. Quando voc√™ vai incluindo mais servi√ßos, cria-se uma situa√ß√£o mais complexa para rodar os servi√ßos em m√°quinas locais, 5/6/7 servi√ßos baseados em JVM podem rodar, mas quando chegamos nas dezenas, a situa√ß√£o √© mais trabalhosa, inclusive com runtimes que s√£o menos taxativos que a JVM.\nOutro ponto importante √© que mudan√ßas em charts, terraform, vulnerabilidades que devem ser aplicadas em m√∫ltiplos servi√ßos podem ser uma dor de se administrar.\nSobrecarga de tecnologias N√£o √© porque microservi√ßos te d√£o a op√ß√£o de rodar diferentes tecnologias, bancos, linguagens que voc√™ deve faz√™-lo, s√£o possibilidades, n√£o requisitos.\nAl√©m disso, diversas empresas, equipes ou desenvolvedores individuais desenvolvem um amor por novas tecnologias que √†s vezes n√£o valem a pena, que servir√£o apenas para incluir mais complexidade em um escopo definido.\nReport de Dados Report de dados com microservi√ßos s√£o mais complicados, principalmente pelo fato de termos (idealmente) banco de dados quebrados em diferentes partes, onde uma simples opera√ß√£o de join n√£o resolve as coisas de uma vez.\nSeguran√ßa, Monitoramento, Testes S√£o basicamente a mesma coisa, temos diversos microservi√ßos conversando entre si, v√°rios fluxos a serem monitorados, os testes e2e ficam muito dif√≠ceis. Esses assuntos vao ser tratados com mais detalhes depois.\nConsist√™ncia de dados Respeitar a consist√™ncia de dados em um sistema muito mais distribu√≠do, com muitos processos independentes, que muitas vezes cuidam de uma base de dados √∫nica √© dif√≠cil. Transa√ß√µes distribu√≠das existem mas costumam ser problem√°ticas, o ideal √© utilizarmos tecnologias como sagas.\nOnde √© complicado usar? Empresas que possuem times excessivamente pequenos Empresas que n√£o conseguem arcar com os custos iniciais de colocar diversas m√°quinas na cloud rodando servi√ßos Empresas as quais o produto n√£o est√° pensado, est√° muito sucet√≠vel a mudan√ßas Vai lascar bastante com os boundaries Outros pontos negativos Os microsservi√ßos precisam se comunicar entre si por meio de pacotes de rede. Um monolito usa principalmente IPC (Comunica√ß√£o entre Processos) e, portanto, √© mais r√°pido. Monitorar todos os microsservi√ßos (muitas vezes, centenas) e verificar sua sa√∫de para garantir um funcionamento suave √© uma dor de cabe√ßa. Mon√≥litos, via de regra, n√£o precisa se preocupar com consist√™ncia. Onde eles funcionam bem? Empresas com diversos desenvolvedores Permite que um dev ou um time n√£o entre no caminho do outro; Permite que seja usado o ponto positivo de cada dev, abordando ferramentas e tecnologias diferentes Empresas que possuem um aporte inicial bom de dinheiro Software que precisa da possibilidade de escalar, e idealmente para diversas regi√µes do mundo Softwares que precisam de flexibilidade. Minha experi√™ncia Quando trabalhei com a arquitetura de microservi√ßos na AMBEV, era uma experi√™ncia relativamente tranquila para n√≥s devs, apesar disso, trazia algumas experi√™ncias cl√°ssicas de seu uso, que n√£o eram boas:\nDeploy de m√∫ltiplos servi√ßos - Deployar mais de um servi√ßo, criar um plano de deploy e monitoramento para cada. N√£o acho que preciso falar muito sobre Configura√ß√µes - Empresas excessivamente grandes s√£o burocr√°ticas, eventualmente precis√°vamos mudar uma tech: Implementar uma doc diferente, mudar o banco de dados, mudar quem √© o gestor em um helm da vida - Tinhamos que replicar isso para os n servi√ßos que tom√°vamos conta Problemas de comunica√ß√£o - Precisamos manualmente adicionar e permitir chamada intra-cluster entre servi√ßos espec√≠ficos, n√£o era uma dor de cabe√ßa de verdade, mas √© uma complexidade. No geral, acho que foi uma experi√™ncia totalmente positiva, n√£o teria como deployarmos um monolito sempre que um update sa√≠sse, seria horr√≠vel, trabalhar ‚Äúisoladamente‚Äù era muito bom tamb√©m. Vale lembrar que s√≥ n√£o houve tanto sofrimento pois tamb√©m tinhamos uma equipe de DevOps respons√°vel por nos livrar de diversos problemas.\n","wordCount":"1576","inLanguage":"pt","image":"https://th.bing.com/th/id/OIG3.yHCJxyinUPawgW65r1mp?pid=ImgGn","datePublished":"2024-05-07T20:14:12Z","dateModified":"2024-05-07T20:14:12Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kaue.cat/posts/microservicos/"},"publisher":{"@type":"Organization","name":"Kaue Gatto","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/kauegatto/hugo-PaperMod/6aab706f2e2053433e33f8fd45dbec615f4d479f/images/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kaue.cat accesskey=h title="Home (Alt + H)"><img src=https://kaue.cat/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://kaue.cat/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://kaue.cat/archives title=Arquivo><span>Arquivo</span></a></li><li><a href=https://kaue.cat/search/ title=Buscar><span>Buscar</span></a></li><li><a href=https://kaue.cat/series/ title=S√©ries><span>S√©ries</span></a></li><li><a href=https://kaue.cat/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://kaue.cat>In√≠cio</a>&nbsp;¬ª&nbsp;<a href=https://kaue.cat/posts/>Posts</a></div><h1 class=post-title>O que s√£o microservi√ßos? Para que servem e quando usar?</h1><div class=post-description>Introdu√ß√£o boa sobre microservi√ßos! Aqui temos ü§ì‚òùÔ∏è</div><div class=post-meta><span title='2024-05-07 20:14:12 +0000 UTC'>7 de maio , 2024</span>&nbsp;¬∑&nbsp;8 minutos&nbsp;¬∑&nbsp;1576 palavras&nbsp;¬∑&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/kauegatto/kauedotcat/content/posts/microservicos.md rel="noopener noreferrer" target=_blank>Sugerir Altera√ß√µes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Conte√∫do</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#disclaimer>Disclaimer:</a></li><li><a href=#vis√£o-geral>Vis√£o Geral</a></li></ul><ul><li><a href=#deploy-independente>Deploy Independente</a></li><li><a href=#modelados-ao-redor-de-um-dom√≠nio-do-neg√≥cio>Modelados ao redor de um dom√≠nio do neg√≥cio</a></li><li><a href=#donos-de-seu-pr√≥prio-estado>Donos de seu pr√≥prio estado</a></li><li><a href=#flexibilidade>Flexibilidade</a><ul><li><a href=#maneira-de-trabalho-com-microservi√ßos>Maneira de trabalho com microservi√ßos</a></li></ul></li><li><a href=#tecnologias-s√£o-importantes-mas-cuidado>Tecnologias s√£o importantes, mas cuidado</a></li><li><a href=#containers-e-kubernetes>Containers e Kubernetes</a></li><li><a href=#streaming>Streaming</a></li></ul><ul><li><a href=#tecnologias-heterog√™neas>Tecnologias Heterog√™neas</a></li><li><a href=#robustez>Robustez</a></li><li><a href=#scaling>Scaling</a></li><li><a href=#facilidade-no-deploy>Facilidade no Deploy</a></li><li><a href=#alinhamento-organizacional>Alinhamento organizacional</a></li><li><a href=#composi√ß√£o>Composi√ß√£o</a></li></ul><ul><li><a href=#experi√™ncia-do-desenvolvedor>Experi√™ncia do Desenvolvedor.</a></li><li><a href=#sobrecarga-de-tecnologias>Sobrecarga de tecnologias</a></li><li><a href=#report-de-dados>Report de Dados</a><ul><li><a href=#seguran√ßa-monitoramento-testes>Seguran√ßa, Monitoramento, Testes</a></li></ul></li><li><a href=#consist√™ncia-de-dados>Consist√™ncia de dados</a></li></ul><ul><li><a href=#outros-pontos-negativos>Outros pontos negativos</a></li></ul></nav></div></details></div><div class=post-content><h2 id=disclaimer>Disclaimer:<a hidden class=anchor aria-hidden=true href=#disclaimer>#</a></h2><p>Esse artigo √© baseado totalmente no Livro <em>Building Microservices</em>, do Sam Newman!</p><h2 id=vis√£o-geral>Vis√£o Geral<a hidden class=anchor aria-hidden=true href=#vis√£o-geral>#</a></h2><p><strong>Microservi√ßos s√£o partes independentes entre si que s√£o modeladas em torno de uma regra de neg√≥cio.</strong> Um servi√ßo encapsula uma funcionalidade e permite que ela seja acess√≠vel por uma rede atrav√©s de requisi√ß√µes REST.</p><p>Microservi√ßos s√£o um tipo de arquiteturas orientadas a servi√ßo, onde fronteiras entre servi√ßos devem ser tra√ßadas, mas apesar disso o release independente √© chave.</p><p>Do lado de fora, um microservi√ßo √© uma caixa preta, exceto por seus endpoints expostos.</p><blockquote><p><strong>[‚ùó] Importante</strong>
Como o ideal √© que a implementa√ß√£o interna do microservi√ßo seja alheia ao mundo exterior, cada microservi√ßo idealmente deve se importar apenas com sua linguagem de programa√ß√£o, com seu banco de dados e outros detalhes internos de implementa√ß√£o. N√£o necessariamente isso ser√° a verdade em um mundo real, nesses casos, precisamos nos preocupar principalmente com acessos concorrentes. Locks distribu√≠dos podem ser uma tacada boa para lidar com recursos compartilhados entre m√∫ltiplos servi√ßos</p></blockquote><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ja2qxphiurwbuhr1uq61.png alt="Image description"></p><p>Como microservi√ßos se baseiam muito na oculta√ß√£o de informa√ß√£o, expondo somente o necess√°rio atrav√©s de interfaces externas, permitem uma maior vis√£o no que pode ou n√£o mudar facilmente. O c√≥digo interno de um microservi√ßo pode mudar a vontade desde que as interfaces externas n√£o mudem seu comportamento.</p><hr><h1 id=pontos-chave-sobre-microservi√ßos>Pontos-Chave sobre microservi√ßos!<a hidden class=anchor aria-hidden=true href=#pontos-chave-sobre-microservi√ßos>#</a></h1><h2 id=deploy-independente>Deploy Independente<a hidden class=anchor aria-hidden=true href=#deploy-independente>#</a></h2><p>Essa √© a ideia que conseguimos mudar um microservi√ßo e dar deploy nele sem termos que fazer deploy em qualquer outro microservi√ßo, na realidade, √© o jeito que devemos tratar os microservi√ßos, n√£o somente o que podemos fazer.</p><p>Para isso acontecer, devemos ter certeza que nossos microservi√ßos est√£o pouco acoplados . Isso significa que o contrato entre os servi√ßos devem ser expl√≠citos e est√°veis. Algumas escolhas de implementa√ß√£o podem tornar isso invi√°vel, como por exemplo o compartilhamento de banco de dados.</p><h2 id=modelados-ao-redor-de-um-dom√≠nio-do-neg√≥cio>Modelados ao redor de um dom√≠nio do neg√≥cio<a hidden class=anchor aria-hidden=true href=#modelados-ao-redor-de-um-dom√≠nio-do-neg√≥cio>#</a></h2><p>Microservi√ßos s√£o modelados ao redor de seu dom√≠nio, para resolver um problema em espec√≠fico. Isso ajuda bastante na separa√ß√£o e no entendimento do dom√≠nio.</p><h2 id=donos-de-seu-pr√≥prio-estado>Donos de seu pr√≥prio estado<a hidden class=anchor aria-hidden=true href=#donos-de-seu-pr√≥prio-estado>#</a></h2><p>Microservi√ßos devem ter dentro de si todos os seus dados importantes, por isso o t√≥pico anterior √© importante na hora de delimitar as fun√ß√µes de um microservi√ßo. Um microservi√ßo deve ser capaz de conversar com outro para pedir a ele alguma informa√ß√£o que n√£o possui, isso deve acontecer via a interface externa desse outro microservi√ßo, o que garante o deploy independente desses servi√ßos</p><h2 id=flexibilidade>Flexibilidade<a hidden class=anchor aria-hidden=true href=#flexibilidade>#</a></h2><p>Microservi√ßos te compram op√ß√µes, no sentido que elas tem um pre√ßo. Mais microservi√ßos, na via de regra, te oferecem mais flexibilidade, contudo, tamb√©m s√£o mais dif√≠ceis de manusear. O tamanho dos microservi√ßos n√£o √© algo t√£o importante quanto a pergunta de quantos microservi√ßos voc√™ consegue administrar e de que forma voc√™ faz isso sem que eles sejam uma bagun√ßa acoplada.</p><hr><h3 id=maneira-de-trabalho-com-microservi√ßos>Maneira de trabalho com microservi√ßos<a hidden class=anchor aria-hidden=true href=#maneira-de-trabalho-com-microservi√ßos>#</a></h3><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1ycgj3wpdmwcgmr7ytvm.png alt="Maneira tradicional. Quando n√£o temos um microservi√ßo, uma mudan√ßa no back ou no front de uma aplica√ß√£o monol√≠tica afeta tudo!"></p><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ulq7ql93xse070dlldal.png alt="Maneira boa!"></p><h2 id=tecnologias-s√£o-importantes-mas-cuidado>Tecnologias s√£o importantes, mas cuidado<a hidden class=anchor aria-hidden=true href=#tecnologias-s√£o-importantes-mas-cuidado>#</a></h2><p>Normalmente √© mais produtivo ir incluindo novas tecnologias que d√£o suporte √† microservi√ßos conforme seu sistema cres√ßa e mais servi√ßos apare√ßam, contudo, algumas ferramentas s√£o essenciais, como por exemplo um agregador de log, ou outras ferramentas que s√£o capazes de visualizar traces entre multiplo servi√ßos, detectar gargalos, etc.</p><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/3km5575n2fhulg5mq8hx.png alt="Image description"></p><hr><h2 id=containers-e-kubernetes>Containers e Kubernetes<a hidden class=anchor aria-hidden=true href=#containers-e-kubernetes>#</a></h2><p>Idealmente, cada microservi√ßo deve ser rodado isoladamente, garantindo que um problema em um microservi√ßo n√£o possa afetar outro, por isso, containers s√£o a maneira mais vi√°vel de se utilizar os microservi√ßos.</p><p>Depois de implementar os microservi√ßos. provavelmente ser√° dific√≠cil de administr√°-los, por isso, √© ideal a utiliza√ß√£o de ferramentas que servem para a orquestra√ß√£o desses containers, kubernetes √© a ferramenta mais conhecida para tal.</p><h2 id=streaming>Streaming<a hidden class=anchor aria-hidden=true href=#streaming>#</a></h2><p>Embora microservi√ßos sejam uma maneira de migrar de bases de dados monol√≠ticas, ainda precisamos encontrar maneiras de transferir informa√ß√µes entre microservi√ßos, ao mesmo tempo que organiza√ß√µes buscam cada vez mais feedbacks em tempo real. Existem muitas ferramentas que ajudam em tal cen√°rio, o apache kafka e rabbitMQ s√£o ferramentas comuns para isso.</p><h1 id=vantagens-de-microservi√ßos>Vantagens de microservi√ßos<a hidden class=anchor aria-hidden=true href=#vantagens-de-microservi√ßos>#</a></h1><h2 id=tecnologias-heterog√™neas>Tecnologias Heterog√™neas<a hidden class=anchor aria-hidden=true href=#tecnologias-heterog√™neas>#</a></h2><p>Com um sistema composto por diversas partes que conseguem trabalhar isoladamente e apenas externalizar uma interface, conseguimos programar essas partes com tecnologias totalmente diferentes, desde que o contrato entre os servi√ßos sejam mantidos. Isso nos permite escolher a ferramenta correta para cada servi√ßo.</p><p><img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xryykiiz5hszvihaz7v6.png alt="Image description"></p><h2 id=robustez>Robustez<a hidden class=anchor aria-hidden=true href=#robustez>#</a></h2><p>Microservi√ßos s√£o capazes de lidar com falhas em determinados setores espec√≠ficos sem com que toda a aplica√ß√£o morra ( o que usualmente acontece em monolitos ). Com os microservi√ßos implementados corretamente, conseguimos lidar com uma falha total em um servi√ßo e apenas fazer com que uma parte do sistema n√£o funcione perfeitamente. Se o sistema de busca da netflix falhar, voc√™ ainda √© capaz de assistir filmes, criar contas, realizar pagamentos e afins.</p><h2 id=scaling>Scaling<a hidden class=anchor aria-hidden=true href=#scaling>#</a></h2><p>Uma arquitetura baseada em microservi√ßos possibilita o ‚Äúscaling‚Äù de coisas isoladamente, onde podemos dedicar mais hardware a partes que realmente necessitam daquilo, e sistemas mais fracos a grupos de servi√ßos menos utilizados.</p><p>O autor d√° um exemplo do marketplace multimilion√°rio focado em modas ‚ÄúGilt‚Äô, e diz que essa foi a principal raz√£o para a Gilt aderir aos microservi√ßos, o mesmo diz que a empresa hoje possui mais de 450 microservi√ßos.</p><h2 id=facilidade-no-deploy>Facilidade no Deploy<a hidden class=anchor aria-hidden=true href=#facilidade-no-deploy>#</a></h2><p>Uma altera√ß√£o em uma linha de c√≥digo em um sistema monolito normalmente pede que o sistema todo passe por um deploy novamente, contudo, gra√ßas a caracter√≠stica de deploys independentes, isso n√£o acontece com os microservi√ßos</p><h2 id=alinhamento-organizacional>Alinhamento organizacional<a hidden class=anchor aria-hidden=true href=#alinhamento-organizacional>#</a></h2><p>Essa quest√£o √© √≥bvia para times grandes de desenvolvimento, separar equipes em partes espec√≠ficas que trabalham com produtos que podem ser melhorados sem necessitar grande movimenta√ß√µes de outras equipes desde que o contrato pr√© estabelecido continue sendo respeitado √© maravilhoso.</p><h2 id=composi√ß√£o>Composi√ß√£o<a hidden class=anchor aria-hidden=true href=#composi√ß√£o>#</a></h2><p>Microservi√ßos podem ser usados em diferentes ambientes e usados em conjuntos para obtermos resultados espec√≠ficos, ajudam no re√∫so de c√≥digo e na efici√™ncia.</p><h1 id=pontos-de-dor--_fraquezas_><strong>Pontos de Dor</strong> / <em>Fraquezas</em><a hidden class=anchor aria-hidden=true href=#pontos-de-dor--_fraquezas_>#</a></h1><blockquote><p>[üìã Cita√ß√£o]
<em>We‚Äôll be covering many of these issues in depth throughout the rest of the book‚Äîin fact, I‚Äôd argue that the bulk of this book is about dealing with the pain, suffering, and horror of owning a microservice architecture.‚Äù</em> - Autor do Livro Building Microservices, usado como base.</p></blockquote><h2 id=experi√™ncia-do-desenvolvedor>Experi√™ncia do Desenvolvedor.<a hidden class=anchor aria-hidden=true href=#experi√™ncia-do-desenvolvedor>#</a></h2><p>Quando voc√™ vai incluindo mais servi√ßos, cria-se uma situa√ß√£o mais complexa para rodar os servi√ßos em m√°quinas locais, 5/6/7 servi√ßos baseados em JVM podem rodar, mas quando chegamos nas dezenas, a situa√ß√£o √© mais trabalhosa, inclusive com runtimes que s√£o menos taxativos que a JVM.</p><p>Outro ponto importante √© que mudan√ßas em charts, terraform, vulnerabilidades que devem ser aplicadas em m√∫ltiplos servi√ßos podem ser uma dor de se administrar.</p><h2 id=sobrecarga-de-tecnologias>Sobrecarga de tecnologias<a hidden class=anchor aria-hidden=true href=#sobrecarga-de-tecnologias>#</a></h2><p>N√£o √© porque microservi√ßos te d√£o a op√ß√£o de rodar diferentes tecnologias, bancos, linguagens que voc√™ deve faz√™-lo, s√£o possibilidades, n√£o requisitos.</p><p>Al√©m disso, diversas empresas, equipes ou desenvolvedores individuais desenvolvem um amor por novas tecnologias que √†s vezes n√£o valem a pena, que servir√£o apenas para incluir mais complexidade em um escopo definido.</p><h2 id=report-de-dados>Report de Dados<a hidden class=anchor aria-hidden=true href=#report-de-dados>#</a></h2><p>Report de dados com microservi√ßos s√£o mais complicados, principalmente pelo fato de termos (idealmente) banco de dados quebrados em diferentes partes, onde uma simples opera√ß√£o de join n√£o resolve as coisas de uma vez.</p><h3 id=seguran√ßa-monitoramento-testes>Seguran√ßa, Monitoramento, Testes<a hidden class=anchor aria-hidden=true href=#seguran√ßa-monitoramento-testes>#</a></h3><p>S√£o basicamente a mesma coisa, temos diversos microservi√ßos conversando entre si, v√°rios fluxos a serem monitorados, os testes e2e ficam muito dif√≠ceis. Esses assuntos vao ser tratados com mais detalhes depois.</p><h2 id=consist√™ncia-de-dados>Consist√™ncia de dados<a hidden class=anchor aria-hidden=true href=#consist√™ncia-de-dados>#</a></h2><p>Respeitar a consist√™ncia de dados em um sistema muito mais distribu√≠do, com muitos processos independentes, que muitas vezes cuidam de uma base de dados √∫nica √© dif√≠cil. Transa√ß√µes distribu√≠das existem mas costumam ser problem√°ticas, o ideal √© utilizarmos tecnologias como sagas.</p><h1 id=onde-√©-complicado-usar>Onde √© complicado usar?<a hidden class=anchor aria-hidden=true href=#onde-√©-complicado-usar>#</a></h1><ul><li>Empresas que possuem times excessivamente pequenos</li><li>Empresas que n√£o conseguem arcar com os custos iniciais de colocar diversas m√°quinas na cloud rodando servi√ßos</li><li>Empresas as quais o produto n√£o est√° pensado, est√° muito sucet√≠vel a mudan√ßas<ul><li>Vai lascar bastante com os boundaries</li></ul></li></ul><h2 id=outros-pontos-negativos>Outros pontos negativos<a hidden class=anchor aria-hidden=true href=#outros-pontos-negativos>#</a></h2><ul><li>Os microsservi√ßos precisam se comunicar entre si por meio de pacotes de rede. Um monolito usa principalmente IPC (Comunica√ß√£o entre Processos) e, portanto, √© mais r√°pido.</li><li>Monitorar todos os microsservi√ßos (muitas vezes, centenas) e verificar sua sa√∫de para garantir um funcionamento suave √© uma dor de cabe√ßa.</li><li>Mon√≥litos, via de regra, n√£o precisa se preocupar com consist√™ncia.</li></ul><h1 id=onde-eles-funcionam-bem>Onde eles funcionam bem?<a hidden class=anchor aria-hidden=true href=#onde-eles-funcionam-bem>#</a></h1><ul><li>Empresas com diversos desenvolvedores<ul><li>Permite que um dev ou um time n√£o entre no caminho do outro;</li><li>Permite que seja usado o ponto positivo de cada dev, abordando ferramentas e tecnologias diferentes</li></ul></li><li>Empresas que possuem um aporte inicial bom de dinheiro</li><li>Software que precisa da possibilidade de escalar, e idealmente para diversas regi√µes do mundo</li><li>Softwares que precisam de flexibilidade.</li></ul><h1 id=minha-experi√™ncia>Minha experi√™ncia<a hidden class=anchor aria-hidden=true href=#minha-experi√™ncia>#</a></h1><p>Quando trabalhei com a arquitetura de microservi√ßos na AMBEV, era uma experi√™ncia relativamente tranquila para n√≥s devs, apesar disso, trazia algumas experi√™ncias cl√°ssicas de seu uso, que n√£o eram boas:</p><ol><li>Deploy de m√∫ltiplos servi√ßos - Deployar mais de um servi√ßo, criar um plano de deploy e monitoramento para cada. N√£o acho que preciso falar muito sobre</li><li>Configura√ß√µes - Empresas excessivamente grandes s√£o burocr√°ticas, eventualmente precis√°vamos mudar uma tech: Implementar uma doc diferente, mudar o banco de dados, mudar quem √© o gestor em um helm da vida - Tinhamos que replicar isso para os <em>n</em> servi√ßos que tom√°vamos conta</li><li>Problemas de comunica√ß√£o - Precisamos manualmente adicionar e permitir chamada intra-cluster entre servi√ßos espec√≠ficos, n√£o era uma dor de cabe√ßa de verdade, mas √© uma complexidade.</li></ol><p>No geral, acho que foi uma experi√™ncia totalmente positiva, n√£o teria como deployarmos um monolito sempre que um update sa√≠sse, seria horr√≠vel, trabalhar &ldquo;isoladamente&rdquo; era muito bom tamb√©m. Vale lembrar que s√≥ n√£o houve tanto sofrimento pois tamb√©m tinhamos uma equipe de DevOps respons√°vel por nos livrar de diversos problemas.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://kaue.cat/tags/architecture/>ARCHITECTURE</a></li><li><a href=https://kaue.cat/tags/microservicos/>Microservicos</a></li></ul><nav class=paginav><a class=prev href=https://kaue.cat/posts/integracao_testcontainers/><span class=title>¬´ P√°gina Anterior</span><br><span>TestContainers em Java: Testes de integra√ß√£o, reposit√≥rios e outras coisas!</span></a>
<a class=next href=https://kaue.cat/posts/concorrencia-java/virtual-threads/><span class=title>Pr√≥xima P√°gina ¬ª</span><br><span>6. Virtual Threads em Java! Fazendo a sua aplica√ß√£o voar!</span></a></nav><div class=share-buttons><a>Compartilhar:</a><br><a target=_blank rel="noopener noreferrer" aria-label="share O que s√£o microservi√ßos? Para que servem e quando usar? on x" href="https://x.com/intent/tweet/?text=O%20que%20s%c3%a3o%20microservi%c3%a7os%3f%20Para%20que%20servem%20e%20quando%20usar%3f&url=https%3a%2f%2fkaue.cat%2fposts%2fmicroservicos%2f&hashtags=ARCHITECTURE%2cMicroservicos"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share O que s√£o microservi√ßos? Para que servem e quando usar? on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fkaue.cat%2fposts%2fmicroservicos%2f&title=O%20que%20s%c3%a3o%20microservi%c3%a7os%3f%20Para%20que%20servem%20e%20quando%20usar%3f&summary=O%20que%20s%c3%a3o%20microservi%c3%a7os%3f%20Para%20que%20servem%20e%20quando%20usar%3f&source=https%3a%2f%2fkaue.cat%2fposts%2fmicroservicos%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share O que s√£o microservi√ßos? Para que servem e quando usar? on whatsapp" href="https://api.whatsapp.com/send?text=O%20que%20s%c3%a3o%20microservi%c3%a7os%3f%20Para%20que%20servem%20e%20quando%20usar%3f%20-%20https%3a%2f%2fkaue.cat%2fposts%2fmicroservicos%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></div></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//www-kaue-cat.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://kaue.cat>Kaue Gatto</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copiar";function s(){t.innerHTML="copiado!",setTimeout(()=>{t.innerHTML="copiar"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>